{\rtf1\ansi\ansicpg936\cocoartf2867
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fswiss\fcharset0 Helvetica;}
{\colortbl;\red255\green255\blue255;}
{\*\expandedcolortbl;;}
\paperw11900\paperh16840\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0

\f0\fs24 \cf0 <!DOCTYPE html>\
<html lang="zh">\
<head>\
    <meta charset="UTF-8">\
    <meta name="viewport" content="width=device-width, initial-scale=1.0">\
    <title>ENDFIELD_LOG // PROTOCOL</title>\
    <script src="https://cdn.tailwindcss.com"></script>\
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>\
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Rajdhani:wght@400;500;600;700&display=swap" rel="stylesheet">\
    <script src="https://unpkg.com/lucide@latest"></script>\
\
    <style>\
        :root \{\
            --bg-color: #09090b; \
            --card-bg: rgba(24, 24, 27, 0.6);\
            --accent-yellow: #FFE600; \
            --text-main: #f4f4f5;\
            --text-dim: #71717a;\
            --border-tech: rgba(255, 255, 255, 0.15);\
        \}\
\
        body \{\
            background-color: var(--bg-color);\
            color: var(--text-main);\
            font-family: 'Rajdhani', sans-serif;\
            overflow-x: hidden;\
            background-image: \
                linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),\
                linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);\
            background-size: 40px 40px;\
        \}\
\
        .font-tech \{ font-family: 'Rajdhani', sans-serif; \}\
        .font-mono \{ font-family: 'JetBrains Mono', monospace; \}\
\
        .cut-corner \{\
            clip-path: polygon(0 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%);\
        \}\
        \
        .cut-corner-top-right \{\
             clip-path: polygon(0 0, calc(100% - 15px) 0, 100% 15px, 100% 100%, 0 100%);\
        \}\
\
        .glass-panel \{\
            background: var(--card-bg);\
            backdrop-filter: blur(12px);\
            -webkit-backdrop-filter: blur(12px);\
            border: 1px solid var(--border-tech);\
        \}\
\
        .active-tab \{\
            background: rgba(255, 230, 0, 0.1);\
            color: var(--accent-yellow);\
            border-bottom: 2px solid var(--accent-yellow);\
        \}\
        \
        .inactive-tab \{\
            color: var(--text-dim);\
            border-bottom: 2px solid transparent;\
        \}\
\
        .slide-up \{ animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1); \}\
        @keyframes slideUp \{\
            from \{ opacity: 0; transform: translateY(20px); \}\
            to \{ opacity: 1; transform: translateY(0); \}\
        \}\
\
        @keyframes scan \{\
            0% \{ transform: translateY(-100%); \}\
            100% \{ transform: translateY(100%); \}\
        \}\
        .scan-line \{\
            position: absolute;\
            left: 0;\
            top: 0;\
            width: 100%;\
            height: 100%;\
            background: linear-gradient(to bottom, transparent, rgba(255, 230, 0, 0.2), transparent);\
            animation: scan 1.5s linear infinite;\
        \}\
        \
        .toast-enter \{ transform: translateY(100%); opacity: 0; \}\
        .toast-active \{ transform: translateY(0); opacity: 1; \}\
    </style>\
</head>\
<body class="min-h-screen flex flex-col max-w-md mx-auto border-x border-white/5 relative">\
\
    <!-- \uc0\u39030 \u37096 \u29366 \u24577 \u26639  -->\
    <header class="sticky top-0 z-50 glass-panel border-b border-white/10">\
        <div class="px-5 py-4 flex justify-between items-center">\
            <div class="flex items-center gap-3">\
                <div class="w-8 h-8 bg-[#FFE600] flex items-center justify-center text-black font-bold cut-corner">\
                    <i data-lucide="triangle" class="w-5 h-5 fill-current rotate-180"></i>\
                </div>\
                <div>\
                    <h1 class="text-xl font-bold tracking-widest leading-none">ENDFIELD</h1>\
                    <div class="text-[0.6rem] font-mono text-[#FFE600] tracking-[0.2em] opacity-80">PROTOCOL_V2</div>\
                </div>\
            </div>\
            <div class="flex flex-col items-end text-[0.6rem] font-mono text-zinc-500">\
                <span id="header-status" class="text-[#FFE600] animate-pulse">CONNECTING...</span>\
                <span id="header-user">GUEST</span>\
            </div>\
        </div>\
    </header>\
\
    <!-- \uc0\u23548 \u33322  Tabs -->\
    <div class="px-4 py-6 bg-gradient-to-b from-[#09090b] to-transparent z-40">\
        <div class="flex font-mono text-sm tracking-widest border-b border-white/10">\
            <button onclick="switchPage('archive')" id="btn-archive" class="flex-1 py-3 text-center transition-all active-tab relative group">\
                <span class="relative z-10">COLLECTION</span>\
                <div class="absolute inset-0 bg-white/5 opacity-0 group-hover:opacity-100 transition-opacity z-0"></div>\
            </button>\
            <div class="w-px bg-white/10 h-6 self-center mx-1"></div>\
            <button onclick="switchPage('stats')" id="btn-stats" class="flex-1 py-3 text-center transition-all inactive-tab relative group">\
                <span class="relative z-10">STATISTICS</span>\
                <div class="absolute inset-0 bg-white/5 opacity-0 group-hover:opacity-100 transition-opacity z-0"></div>\
            </button>\
        </div>\
    </div>\
\
    <!-- \uc0\u20027 \u20869 \u23481  -->\
    <main class="flex-1 px-4 pb-32 overflow-y-auto">\
        \
        <!-- PAGE 1: \uc0\u21015 \u34920  -->\
        <div id="page-archive" class="slide-up">\
            <!-- 1. \uc0\u19968 \u32423 \u36807 \u28388 \u22120  (\u22823 \u31867 ) -->\
            <div class="flex gap-2 mb-4 border-b border-white/5 pb-2">\
                <button onclick="filterType('book')" id="filter-book" class="flex-1 px-1 py-2 text-xs font-bold font-mono bg-[#FFE600] text-black cut-corner transition-all text-center truncate">\
                    // BOOKS\
                </button>\
                <button onclick="filterType('movie')" id="filter-movie" class="flex-1 px-1 py-2 text-xs font-bold font-mono bg-zinc-800 text-zinc-400 cut-corner hover:text-white transition-all text-center truncate">\
                    // MOVIES\
                </button>\
                <button onclick="filterType('music')" id="filter-music" class="flex-1 px-1 py-2 text-xs font-bold font-mono bg-zinc-800 text-zinc-400 cut-corner hover:text-white transition-all text-center truncate">\
                    // AUDIO\
                </button>\
                <button onclick="filterType('video')" id="filter-video" class="flex-1 px-1 py-2 text-xs font-bold font-mono bg-zinc-800 text-zinc-400 cut-corner hover:text-white transition-all text-center truncate">\
                    // VIDEOS\
                </button>\
            </div>\
\
            <!-- 2. \uc0\u20108 \u32423 \u36807 \u28388 \u22120  (\u33258 \u23450 \u20041 \u23567 \u26631 \u31614 ) -->\
            <div class="flex flex-wrap gap-2 mb-6 min-h-[40px]" id="sub-filter-container">\
                <!-- JS \uc0\u22635 \u20805  -->\
            </div>\
\
            <!-- \uc0\u21015 \u34920 \u23481 \u22120  -->\
            <div class="grid grid-cols-1 gap-4" id="item-list">\
                <div class="text-center text-zinc-500 text-xs font-mono p-10">INITIALIZING LINK...</div>\
            </div>\
            \
            <div class="h-12"></div>\
        </div>\
\
        <!-- PAGE 2: \uc0\u32479 \u35745  -->\
        <div id="page-stats" class="hidden slide-up">\
            <!-- \uc0\u24635 \u35272 \u21345 \u29255  -->\
            <div class="glass-panel p-5 mb-6 relative cut-corner-top-right">\
                <div class="absolute top-0 right-0 w-8 h-8 border-t border-r border-[#FFE600]"></div>\
                <h3 class="text-xs font-mono text-[#FFE600] mb-4 flex items-center gap-2">\
                    <i data-lucide="activity" class="w-3 h-3"></i>\
                    AGGREGATED_DATA\
                </h3>\
                <div class="grid grid-cols-2 gap-y-6">\
                    <div>\
                        <div class="text-[0.65rem] text-zinc-500 font-mono mb-1">TOTAL_ENTRIES</div>\
                        <div class="text-3xl font-bold font-mono" id="stat-total">0</div>\
                    </div>\
                    <div class="text-right">\
                        <div class="text-[0.65rem] text-zinc-500 font-mono mb-1">SYS_RUNTIME</div>\
                        <div class="text-3xl font-bold font-mono text-[#FFE600]">\
                            <span id="stat-hours">000</span><span class="text-sm text-zinc-500 ml-1">HRS</span>\
                        </div>\
                    </div>\
                </div>\
                <div class="flex justify-between items-end mt-4 mb-1">\
                    <span class="text-[0.5rem] font-mono text-zinc-600">TARGET_COMPLETION</span>\
                    <div class="text-[0.5rem] font-mono">\
                        <span class="text-zinc-500" id="stat-goal-text">0 / 200 HRS</span>\
                        <span class="text-[#FFE600] ml-2" id="stat-load">0%</span>\
                    </div>\
                </div>\
                <div class="w-full bg-zinc-800 h-1 overflow-hidden">\
                    <div class="h-full bg-[#FFE600] transition-all duration-1000 ease-out relative" style="width: 0%" id="stat-bar">\
                        <div class="absolute inset-0 bg-white/30 w-full h-full animate-[shimmer_2s_infinite]"></div>\
                    </div>\
                </div>\
            </div>\
\
            <!-- \uc0\u26609 \u29366 \u22270 \u21306 \u22495  (\u21160 \u24577 \u32852 \u21160 \u29256 ) -->\
            <div class="mb-6">\
                 <div class="flex justify-between items-end mb-3 border-b border-white/10 pb-2">\
                    <span class="text-sm font-bold tracking-wider">QUARTERLY_ANALYSIS</span>\
                 </div>\
                 <div class="flex items-end justify-between h-32 gap-3">\
                    <!-- Q1 Bar -->\
                    <div class="flex-1 bg-zinc-800 border border-white/5 relative h-full flex flex-col justify-end group cursor-default">\
                        <div id="stat-q1-bar" class="w-full bg-[#FFE600] opacity-60 hover:opacity-100 transition-all duration-700 relative shadow-[0_0_10px_rgba(255,230,0,0.1)]" style="height: 0%">\
                             <!-- \uc0\u24748 \u28014 \u25968 \u20540  -->\
                             <div class="absolute -top-6 left-1/2 -translate-x-1/2 bg-black border border-[#FFE600] text-[#FFE600] text-[0.6rem] px-1 opacity-0 group-hover:opacity-100 transition-opacity font-mono" id="stat-q1-val">0</div>\
                        </div>\
                    </div>\
                    <!-- Q2 Bar -->\
                    <div class="flex-1 bg-zinc-800 border border-white/5 relative h-full flex flex-col justify-end group cursor-default">\
                        <div id="stat-q2-bar" class="w-full bg-[#FFE600] opacity-60 hover:opacity-100 transition-all duration-700 relative shadow-[0_0_10px_rgba(255,230,0,0.1)]" style="height: 0%">\
                             <div class="absolute -top-6 left-1/2 -translate-x-1/2 bg-black border border-[#FFE600] text-[#FFE600] text-[0.6rem] px-1 opacity-0 group-hover:opacity-100 transition-opacity font-mono" id="stat-q2-val">0</div>\
                        </div>\
                    </div>\
                    <!-- Q3 Bar -->\
                    <div class="flex-1 bg-zinc-800 border border-white/5 relative h-full flex flex-col justify-end group cursor-default">\
                        <div id="stat-q3-bar" class="w-full bg-[#FFE600] opacity-60 hover:opacity-100 transition-all duration-700 relative shadow-[0_0_10px_rgba(255,230,0,0.1)]" style="height: 0%">\
                             <div class="absolute -top-6 left-1/2 -translate-x-1/2 bg-black border border-[#FFE600] text-[#FFE600] text-[0.6rem] px-1 opacity-0 group-hover:opacity-100 transition-opacity font-mono" id="stat-q3-val">0</div>\
                        </div>\
                    </div>\
                    <!-- Q4 Bar -->\
                    <div class="flex-1 bg-zinc-800 border border-white/5 relative h-full flex flex-col justify-end group cursor-default">\
                        <div id="stat-q4-bar" class="w-full bg-[#FFE600] opacity-60 hover:opacity-100 transition-all duration-700 relative shadow-[0_0_10px_rgba(255,230,0,0.1)]" style="height: 0%">\
                             <div class="absolute -top-6 left-1/2 -translate-x-1/2 bg-black border border-[#FFE600] text-[#FFE600] text-[0.6rem] px-1 opacity-0 group-hover:opacity-100 transition-opacity font-mono" id="stat-q4-val">0</div>\
                        </div>\
                    </div>\
                 </div>\
                 <div class="flex justify-between text-[0.6rem] font-mono text-zinc-500 mt-2 px-6 tracking-widest">\
                     <span>Q1</span><span>Q2</span><span>Q3</span><span>Q4</span>\
                 </div>\
            </div>\
            \
            <div class="border-t border-white/10 pt-6 mt-8">\
                <button onclick="handleLogout()" class="w-full py-3 text-xs font-mono text-zinc-600 hover:text-[#FFE600] border border-dashed border-zinc-800 hover:border-[#FFE600] transition-colors flex items-center justify-center gap-2">\
                    <i data-lucide="log-out" class="w-3 h-3"></i> DISCONNECT_SESSION\
                </button>\
            </div>\
            <div class="h-24"></div>\
        </div>\
    </main>\
\
    <!-- Footer System Bar -->\
    <footer class="fixed bottom-0 left-0 right-0 bg-[#09090b]/95 backdrop-blur-md border-t border-[#FFE600]/30 z-[60] px-6 py-3 pb-6 shadow-[0_-5px_20px_rgba(0,0,0,0.5)]">\
        <div class="flex justify-between items-end mb-2 font-mono">\
            <div class="flex flex-col">\
                <span class="text-[0.5rem] text-zinc-600 uppercase tracking-widest">SYSTEM_DATE</span>\
                <span class="text-xs text-zinc-200" id="footer-date">--.--.--</span>\
            </div>\
            <div class="flex flex-col items-end">\
                <span class="text-[0.5rem] text-zinc-600 uppercase tracking-widest">YEAR_REMAINING</span>\
                <span class="text-xs text-[#FFE600]" id="footer-year-rem">--%</span>\
            </div>\
        </div>\
        <div class="w-full h-1.5 bg-zinc-800 overflow-hidden relative">\
            <div id="footer-year-bar" class="h-full bg-[#FFE600] shadow-[0_0_10px_#FFE600] transition-all duration-1000" style="width: 0%"></div>\
        </div>\
    </footer>\
    \
    <!-- \uc0\u35814 \u24773 \u24377 \u31383  -->\
    <div id="detail-modal" class="fixed inset-0 z-[100] hidden">\
        <div class="absolute inset-0 bg-black/80 backdrop-blur-sm transition-opacity duration-300 opacity-0" id="detail-backdrop" onclick="closeDetailModal()"></div>\
        <div class="absolute inset-x-0 bottom-0 md:inset-0 md:flex md:items-center md:justify-center pointer-events-none">\
            <div class="bg-[#18181b] border-t border-white/20 md:border border-white/10 md:w-full md:max-w-md md:h-fit md:max-h-[85vh] md:rounded-lg w-full h-[85vh] flex flex-col transform transition-transform duration-300 translate-y-full md:translate-y-10 pointer-events-auto shadow-[0_-10px_40px_rgba(0,0,0,0.8)]" id="detail-content">\
                <div class="flex justify-between items-center p-4 border-b border-white/10 bg-black/40">\
                    <div class="flex items-center gap-2">\
                        <div class="w-1 h-4 bg-[#FFE600]"></div>\
                        <!-- \uc0\u21160 \u24577 \u22270 \u26631 \u23481 \u22120  -->\
                        <div id="modal-icon-container" class="text-[#FFE600]"></div>\
                        <span class="font-mono text-xs text-[#FFE600] tracking-widest">DATA_DETAIL // <span id="modal-id">001</span></span>\
                    </div>\
                    <button onclick="closeDetailModal()" class="text-zinc-500 hover:text-white"><i data-lucide="x" class="w-6 h-6"></i></button>\
                </div>\
                <div class="flex-1 overflow-y-auto p-0 scrollbar-hide">\
                    <div class="w-full h-48 relative overflow-hidden group">\
                        <img id="modal-img" src="" class="w-full h-full object-cover opacity-80">\
                        <div class="absolute inset-0 bg-gradient-to-t from-[#18181b] via-transparent to-transparent"></div>\
                        <div class="absolute bottom-4 right-4 bg-black/60 backdrop-blur border border-[#FFE600]/30 px-3 py-1 flex items-center gap-1 cut-corner">\
                             <span class="text-[#FFE600] text-lg">\uc0\u9733 </span>\
                             <span class="font-bold font-mono text-white" id="modal-rating">5.0</span>\
                        </div>\
                    </div>\
                    <div class="p-6 space-y-6">\
                        <div>\
                            <h2 id="modal-title" class="text-2xl font-bold text-white leading-tight mb-1">TITLE</h2>\
                            <p id="modal-author" class="text-sm font-mono text-zinc-400 uppercase tracking-wider">AUTHOR</p>\
                        </div>\
                        <div class="flex flex-wrap gap-2" id="modal-tags"></div>\
                        <div class="space-y-2">\
                            <div class="flex items-center gap-2 text-xs font-mono text-[#FFE600]"><i data-lucide="file-text" class="w-3 h-3"></i><span>SYNOPSIS_DATA</span></div>\
                            <p id="modal-desc" class="text-sm text-zinc-400 leading-relaxed text-justify"></p>\
                        </div>\
                        <div class="space-y-2 pt-4 border-t border-dashed border-white/10">\
                             <div class="flex items-center gap-2 text-xs font-mono text-[#FFE600]"><i data-lucide="edit-3" class="w-3 h-3"></i><span>PERSONAL_MEMO</span></div>\
                             <textarea id="modal-note" class="w-full bg-white/5 border border-white/10 p-3 pl-4 text-sm text-zinc-300 font-mono focus:outline-none focus:border-[#FFE600] focus:bg-white/10 transition-all min-h-[100px] resize-none block placeholder-zinc-600"></textarea>\
                        </div>\
                    </div>\
                </div>\
                <div class="p-4 border-t border-white/10 bg-black/40 flex gap-3">\
                    <button class="flex-1 py-3 bg-[#FFE600] text-black font-bold font-mono text-sm cut-corner hover:bg-white transition-colors flex justify-center items-center gap-2" onclick="closeDetailModal()">\
                        <i data-lucide="save" class="w-4 h-4"></i> SAVE_CHANGES\
                    </button>\
                    <button onclick="deleteEntry()" class="w-12 flex items-center justify-center bg-[#ef4444] text-black hover:bg-[#b91c1c] hover:text-white transition-colors cut-corner shadow-[0_0_10px_rgba(239,68,68,0.4)] group" title="DELETE_ENTRY">\
                        <i data-lucide="trash-2" class="w-5 h-5 group-hover:rotate-12 transition-transform"></i>\
                    </button>\
                </div>\
            </div>\
        </div>\
    </div>\
\
    <!-- \uc0\u28155 \u21152 \u26723 \u26696 \u24377 \u31383  -->\
    <div id="add-modal" class="fixed inset-0 z-[100] hidden">\
        <div class="absolute inset-0 bg-black/90 backdrop-blur-md transition-opacity duration-300 opacity-0" id="add-backdrop"></div>\
        <div class="absolute inset-x-0 bottom-0 md:inset-0 md:flex md:items-center md:justify-center pointer-events-auto">\
            <div class="bg-[#09090b] border border-[#FFE600]/30 md:w-full md:max-w-lg w-full h-[90vh] md:h-auto md:rounded-lg flex flex-col transform transition-transform duration-300 translate-y-full md:translate-y-10 shadow-[0_0_50px_rgba(255,230,0,0.1)] relative overflow-hidden" id="add-content">\
                <div class="scan-line pointer-events-none opacity-20"></div>\
                <div class="flex justify-between items-center p-4 border-b border-[#FFE600]/30 bg-[#FFE600]/5">\
                    <div class="flex items-center gap-2">\
                        <!-- \uc0\u36825 \u37324 \u30340 \u22270 \u26631 \u29616 \u22312 \u26159 \u21160 \u24577 \u30340  -->\
                        <div id="add-modal-icon-container" class="text-[#FFE600]"></div>\
                        <span class="font-mono text-sm text-[#FFE600] tracking-widest">NEW_ENTRY // <span id="add-type-label">UNKNOWN</span></span>\
                    </div>\
                    <button onclick="closeAddModal()" class="text-zinc-500 hover:text-[#FFE600]"><i data-lucide="x" class="w-6 h-6"></i></button>\
                </div>\
                <div class="flex-1 p-6 space-y-6 overflow-y-auto">\
                    <div class="space-y-2">\
                        <label class="text-[0.65rem] font-mono text-zinc-500">DATABASE_SEARCH_QUERY</label>\
                        <div class="flex gap-2">\
                            <input type="text" id="add-search-input" class="flex-1 bg-black border border-white/20 p-3 text-sm text-white font-mono focus:border-[#FFE600] focus:outline-none placeholder-zinc-700 uppercase" placeholder="ENTER TITLE OR ISBN...">\
                            <button onclick="simulateSearch()" class="px-4 bg-zinc-800 text-[#FFE600] border border-white/20 hover:bg-[#FFE600] hover:text-black hover:border-[#FFE600] transition-colors font-mono text-xs font-bold">\
                                SCAN\
                            </button>\
                        </div>\
                    </div>\
                    <div id="search-result-area" class="hidden border border-dashed border-[#FFE600]/50 p-4 bg-[#FFE600]/5 relative">\
                        <div class="absolute top-0 left-0 bg-[#FFE600] text-black text-[0.6rem] font-mono px-1">MATCH_FOUND</div>\
                        <div class="flex gap-4 mt-2">\
                            <div class="w-16 h-24 bg-black border border-white/10 flex-shrink-0">\
                                <img id="res-img" src="" class="w-full h-full object-cover opacity-80">\
                            </div>\
                            <div class="flex-1 min-w-0">\
                                <div id="res-title" class="font-bold text-white truncate">Title</div>\
                                <div id="res-author" class="text-xs font-mono text-zinc-400">Author</div>\
                                <div class="mt-2 text-[0.65rem] text-[#FFE600] border border-[#FFE600] inline-block px-1">AUTO_FETCHED</div>\
                            </div>\
                        </div>\
                    </div>\
                    <div class="space-y-4 pt-4 border-t border-white/10">\
                        <div class="grid grid-cols-2 gap-4">\
                            <div class="space-y-1">\
                                <label class="text-[0.65rem] font-mono text-zinc-500">MY_RATING</label>\
                                <select id="add-rating" class="w-full bg-black border border-white/20 p-2 text-sm text-white font-mono focus:border-[#FFE600]">\
                                    <option value="5">\uc0\u9733 \u9733 \u9733 \u9733 \u9733  (5)</option>\
                                    <option value="4">\uc0\u9733 \u9733 \u9733 \u9733 \u9734  (4)</option>\
                                    <option value="3">\uc0\u9733 \u9733 \u9733 \u9734 \u9734  (3)</option>\
                                    <option value="2">\uc0\u9733 \u9733 \u9734 \u9734 \u9734  (2)</option>\
                                    <option value="1">\uc0\u9733 \u9734 \u9734 \u9734 \u9734  (1)</option>\
                                </select>\
                            </div>\
                            <div class="space-y-1">\
                                <label class="text-[0.65rem] font-mono text-zinc-500">COMPLETION_DATE</label>\
                                <input type="date" id="add-date" class="w-full bg-black border border-white/20 p-2 text-sm text-white font-mono focus:border-[#FFE600]">\
                            </div>\
                        </div>\
                        <div class="space-y-1">\
                            <label class="text-[0.65rem] font-mono text-zinc-500">TAGS (COMMA SEPARATED)</label>\
                            <input type="text" id="add-tags" class="w-full bg-black border border-white/20 p-2 text-sm text-white font-mono focus:border-[#FFE600]" placeholder="SCI-FI, DRAMA...">\
                        </div>\
                    </div>\
                </div>\
                <div class="p-4 border-t border-[#FFE600]/30 bg-[#FFE600]/10 flex gap-3">\
                    <button onclick="saveNewEntry()" class="flex-1 py-3 bg-[#FFE600] text-black font-bold font-mono text-sm cut-corner hover:bg-white transition-colors shadow-[0_0_15px_#FFE600]">\
                        CONFIRM & LOG ENTRY\
                    </button>\
                </div>\
            </div>\
        </div>\
    </div>\
\
    <!-- \uc0\u28040 \u24687 \u25552 \u31034 \u26694  -->\
    <div id="toast" class="fixed top-6 left-1/2 -translate-x-1/2 z-[200] bg-[#FFE600] text-black px-4 py-2 font-mono text-xs font-bold shadow-[0_0_20px_rgba(255,230,0,0.5)] transition-all duration-300 pointer-events-none toast-enter flex items-center gap-2 cut-corner">\
        <i data-lucide="check-circle" class="w-4 h-4"></i> <span id="toast-msg">SYSTEM_UPDATED</span>\
    </div>\
\
    <!-- \uc0\u21024 \u38500 \u30830 \u35748 \u24377 \u31383  -->\
    <div id="confirm-modal" class="fixed inset-0 z-[200] hidden">\
        <div class="absolute inset-0 bg-black/90 backdrop-blur-md transition-opacity duration-300" onclick="closeConfirmModal()"></div>\
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-72 bg-[#18181b] border border-red-500/50 p-5 text-center shadow-[0_0_40px_rgba(220,38,38,0.3)] cut-corner transform transition-all duration-300 scale-90 opacity-0" id="confirm-content">\
            <div class="text-red-500 font-mono font-bold text-lg mb-2 flex justify-center items-center gap-2">\
                <i data-lucide="alert-triangle" class="w-6 h-6"></i> WARNING\
            </div>\
            <p class="text-zinc-400 text-xs font-mono mb-6 leading-relaxed">\
                PERMANENTLY DELETE ENTRY?<br>\
                <span class="text-red-500/70">DATA WILL BE LOST FOREVER.</span>\
            </p>\
            <div class="flex gap-3">\
                <button onclick="closeConfirmModal()" class="flex-1 py-3 border border-zinc-700 text-zinc-400 text-xs font-mono hover:bg-zinc-800 hover:text-white transition-colors cut-corner">\
                    CANCEL\
                </button>\
                <button onclick="confirmDeleteAction()" class="flex-1 py-3 bg-red-600 text-white text-xs font-mono font-bold hover:bg-red-500 transition-colors shadow-[0_0_15px_rgba(220,38,38,0.4)] cut-corner">\
                    CONFIRM\
                </button>\
            </div>\
        </div>\
    </div>\
\
    <!-- \uc0\u30331 \u24405 /\u27880 \u20876 \u24377 \u31383  -->\
    <div id="auth-modal" class="fixed inset-0 z-[300] hidden">\
        <div class="absolute inset-0 bg-black/95 backdrop-blur-xl"></div>\
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-80 bg-[#09090b] border border-[#FFE600]/50 p-8 shadow-[0_0_50px_rgba(255,230,0,0.2)] cut-corner">\
            <div class="text-center mb-6">\
                <i data-lucide="shield-alert" class="w-10 h-10 text-[#FFE600] mx-auto mb-2"></i>\
                <h2 class="text-lg font-bold text-white tracking-widest">AUTHENTICATION_REQUIRED</h2>\
                <p class="text-[0.6rem] text-zinc-500 font-mono mt-1">PLEASE IDENTIFY YOURSELF TO ACCESS PROTOCOL</p>\
            </div>\
            <div class="space-y-4">\
                <input type="email" id="auth-email" placeholder="OPERATOR_ID (EMAIL)" class="w-full bg-black border border-white/20 p-3 text-sm text-white font-mono focus:border-[#FFE600] outline-none">\
                <input type="password" id="auth-password" placeholder="ACCESS_KEY (PASSWORD)" class="w-full bg-black border border-white/20 p-3 text-sm text-white font-mono focus:border-[#FFE600] outline-none">\
                <button onclick="handleAuth('login')" class="w-full py-3 bg-[#FFE600] text-black font-bold font-mono text-sm cut-corner hover:bg-white transition-colors">\
                    LOGIN // CONNECT\
                </button>\
                <button onclick="handleAuth('signup')" class="w-full py-3 border border-zinc-700 text-zinc-400 font-mono text-sm cut-corner hover:text-white hover:border-white transition-colors">\
                    REGISTER_NEW_ID\
                </button>\
            </div>\
            <div id="auth-msg" class="mt-4 text-center text-[0.6rem] font-mono text-red-500 h-4"></div>\
        </div>\
    </div>\
\
    <!-- FAB -->\
    <div class="fixed bottom-24 right-6 z-50 flex flex-col items-end gap-3" id="fab-container">\
        <button onclick="openAddModal('music')" class="fab-item translate-y-26 opacity-0 pointer-events-none transition-all duration-300 ease-out delay-[75ms] flex items-center gap-3 group">\
            <span class="bg-black/80 text-white text-[0.6rem] px-2 py-1 font-mono border border-white/20 opacity-0 group-hover:opacity-100 transition-opacity">LOG_AUDIO</span>\
            <div class="w-10 h-10 bg-zinc-800 border border-white/20 text-zinc-400 flex items-center justify-center cut-corner hover:bg-[#FFE600] hover:text-black hover:border-[#FFE600] transition-colors shadow-lg"><i data-lucide="music" class="w-5 h-5"></i></div>\
        </button>\
        <button onclick="openAddModal('movie')" class="fab-item translate-y-20 opacity-0 pointer-events-none transition-all duration-300 ease-out delay-[50ms] flex items-center gap-3 group">\
            <span class="bg-black/80 text-white text-[0.6rem] px-2 py-1 font-mono border border-white/20 opacity-0 group-hover:opacity-100 transition-opacity">LOG_VISUAL</span>\
            <div class="w-10 h-10 bg-zinc-800 border border-white/20 text-zinc-400 flex items-center justify-center cut-corner hover:bg-[#FFE600] hover:text-black hover:border-[#FFE600] transition-colors shadow-lg"><i data-lucide="film" class="w-5 h-5"></i></div>\
        </button>\
        <button onclick="openAddModal('book')" class="fab-item translate-y-14 opacity-0 pointer-events-none transition-all duration-300 ease-out delay-[25ms] flex items-center gap-3 group">\
            <span class="bg-black/80 text-white text-[0.6rem] px-2 py-1 font-mono border border-white/20 opacity-0 group-hover:opacity-100 transition-opacity">LOG_DATA</span>\
            <div class="w-10 h-10 bg-zinc-800 border border-white/20 text-zinc-400 flex items-center justify-center cut-corner hover:bg-[#FFE600] hover:text-black hover:border-[#FFE600] transition-colors shadow-lg"><i data-lucide="book" class="w-5 h-5"></i></div>\
        </button>\
        <button onclick="openAddModal('video')" class="fab-item translate-y-8 opacity-0 pointer-events-none transition-all duration-300 ease-out delay-[0ms] flex items-center gap-3 group">\
            <span class="bg-black/80 text-white text-[0.6rem] px-2 py-1 font-mono border border-white/20 opacity-0 group-hover:opacity-100 transition-opacity">LOG_VIDEO</span>\
            <div class="w-10 h-10 bg-zinc-800 border border-white/20 text-zinc-400 flex items-center justify-center cut-corner hover:bg-[#FFE600] hover:text-black hover:border-[#FFE600] transition-colors shadow-lg"><i data-lucide="monitor-play" class="w-5 h-5"></i></div>\
        </button>\
        <button onclick="toggleFab()" id="fab-trigger" class="w-14 h-14 bg-[#FFE600] text-black shadow-[0_0_20px_rgba(255,230,0,0.3)] flex flex-col items-center justify-center hover:scale-105 active:scale-95 transition-all cut-corner group relative z-50">\
            <i data-lucide="plus" class="w-6 h-6 group-hover:rotate-90 transition-transform duration-300 absolute opacity-100 scale-100" id="icon-plus"></i>\
            <i data-lucide="x" class="w-6 h-6 transition-transform duration-300 absolute opacity-0 scale-50" id="icon-close"></i>\
            <span class="absolute bottom-1 right-1 text-[0.5rem] font-bold font-mono opacity-50">OPS</span>\
        </button>\
        <div class="absolute -bottom-2 -right-2 w-4 h-4 border-b border-r border-[#FFE600] opacity-50 pointer-events-none"></div>\
    </div>\
\
    <script>\
        lucide.createIcons();\
\
        // ----------------------------------------------------------\
        // SUPABASE CONFIGURATION\
        // ----------------------------------------------------------\
        const SUPABASE_URL = 'https://zgtujfmmopinjsubtufz.supabase.co'; \
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpndHVqZm1tb3BpbmpzdWJ0dWZ6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQwNjcxMzUsImV4cCI6MjA3OTY0MzEzNX0.6b00gCVCZrwYaTitCyPEV2aze7g77GmcvOi-NIXhcfs'; // User provided key\
        \
        let sbClient;\
        let session = null;\
\
        try \{\
            if (typeof supabase !== 'undefined') \{\
                sbClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);\
            \} else \{\
                console.error("Supabase SDK failed to load.");\
            \}\
        \} catch(e) \{\
            console.error("Supabase Init Error:", e);\
        \}\
\
        // ----------------------------------------------------------\
        // DATA HANDLING\
        // ----------------------------------------------------------\
        let mockData = []; \
        const categoryTags = \{\
            'book': ['ALL', 'NOVEL', 'PHILOSOPHY', 'SOCIOLOGY', 'LITERATURE', 'ART'],\
            'movie': ['ALL', 'SCI-FI', 'DRAMA', 'ACTION', 'ANIME', 'DOC'],\
            'music': ['ALL', 'ELECTRONIC', 'ROCK', 'JAZZ', 'POP', 'CLASSICAL'],\
            'video': ['ALL', 'SCIENCE', 'TUTORIAL', 'VLOG', 'GAME', 'ESSAY']\
        \};\
        \
        // \uc0\u22270 \u26631 \u26144 \u23556 \
        const categoryIcons = \{\
            'book': 'book',\
            'movie': 'film',\
            'music': 'music',\
            'video': 'monitor-play'\
        \};\
\
        let currentType = 'book';\
        let currentSubTag = 'ALL';\
        let currentDetailId = null;\
\
        function mapLogToApp(log) \{\
            return \{\
                id: log.id,\
                type: log.category,\
                title: log.title,\
                author: log.creator,\
                date: log.finished_at ? log.finished_at.replace(/-/g, '.') : 'N/A',\
                rating: log.rating,\
                duration: log.duration_mins,\
                tags: log.tags || [],\
                img: log.cover_url || 'https://placehold.co/100x150/111/ffb000?text=LOG',\
                desc: log.summary,\
                note: log.review\
            \};\
        \}\
\
        // AUTHENTICATION\
        async function initAuth() \{\
            if (!sbClient) return;\
            const \{ data \} = await sbClient.auth.getSession();\
            session = data.session;\
            updateUserUI();\
\
            if (!session) \{\
                document.getElementById('auth-modal').classList.remove('hidden');\
            \} else \{\
                fetchLogs();\
            \}\
\
            sbClient.auth.onAuthStateChange((_event, _session) => \{\
                session = _session;\
                updateUserUI();\
                if (session) \{\
                    document.getElementById('auth-modal').classList.add('hidden');\
                    fetchLogs();\
                \} else \{\
                    document.getElementById('auth-modal').classList.remove('hidden');\
                    mockData = [];\
                    renderList(currentType);\
                \}\
            \});\
        \}\
\
        function updateUserUI() \{\
            const statusEl = document.getElementById('header-status');\
            const userEl = document.getElementById('header-user');\
            if (session) \{\
                statusEl.innerText = "CONNECTED";\
                statusEl.classList.remove('animate-pulse');\
                statusEl.classList.add('text-green-500');\
                userEl.innerText = session.user.email.split('@')[0].toUpperCase();\
            \} else \{\
                statusEl.innerText = "WAITING AUTH...";\
                statusEl.classList.add('animate-pulse');\
                statusEl.classList.remove('text-green-500');\
                userEl.innerText = "GUEST";\
            \}\
        \}\
\
        async function handleAuth(type) \{\
            const email = document.getElementById('auth-email').value;\
            const password = document.getElementById('auth-password').value;\
            const msgEl = document.getElementById('auth-msg');\
            msgEl.innerText = "PROCESSING...";\
\
            let result;\
            if (type === 'signup') \{\
                result = await sbClient.auth.signUp(\{ email, password \});\
                if (!result.error) msgEl.innerText = "CHECK EMAIL FOR CONFIRMATION!";\
            \} else \{\
                result = await sbClient.auth.signInWithPassword(\{ email, password \});\
            \}\
\
            if (result.error) \{\
                msgEl.innerText = "ERROR: " + result.error.message.toUpperCase();\
            \} else if (type === 'login' && !result.error) \{\
                msgEl.innerText = "ACCESS GRANTED";\
            \}\
        \}\
\
        async function handleLogout() \{\
            await sbClient.auth.signOut();\
        \}\
\
        // CRUD OPERATIONS\
        async function fetchLogs() \{\
            if (!session) return;\
            const container = document.getElementById('item-list');\
            container.innerHTML = '<div class="text-center text-zinc-500 text-xs font-mono p-10 animate-pulse">DOWNLOADING DATA...</div>';\
\
            const \{ data, error \} = await sbClient\
                .from('user_logs')\
                .select('*')\
                .order('created_at', \{ ascending: false \});\
\
            if (error) \{\
                showToast("FETCH_ERROR");\
                console.error(error);\
            \} else \{\
                mockData = data.map(mapLogToApp);\
                renderList(currentType);\
                calculateStats();\
                showToast("SYNC_COMPLETE");\
            \}\
        \}\
\
        async function saveNewEntry() \{\
            const title = document.getElementById('add-search-input').value || "UNTITLED LOG";\
            const dateVal = document.getElementById('add-date').value;\
            const rating = parseInt(document.getElementById('add-rating').value);\
            const tagsStr = document.getElementById('add-tags').value;\
            const tags = tagsStr.split(',').map(s=>s.trim()).filter(s=>s);\
            const img = document.getElementById('res-img').src;\
            const author = document.getElementById('res-author').innerText;\
\
            const newEntryDB = \{\
                user_id: session.user.id,\
                category: currentAddType,\
                title: title,\
                creator: author === "Author" ? "Unknown" : author,\
                finished_at: dateVal ? dateVal : null,\
                rating: rating,\
                duration_mins: 0,\
                tags: tags.length ? tags : ['MANUAL'],\
                cover_url: img,\
                summary: 'Manual entry logged by user.',\
                review: ''\
            \};\
\
            const \{ data, error \} = await sbClient.from('user_logs').insert([newEntryDB]).select();\
\
            if (error) \{\
                alert("UPLOAD FAILED: " + error.message);\
            \} else \{\
                fetchLogs();\
                closeAddModal();\
                showToast("ENTRY_LOGGED");\
            \}\
        \}\
\
        async function confirmDeleteAction() \{\
            if (!currentDetailId) return;\
            const \{ error \} = await sbClient.from('user_logs').delete().eq('id', currentDetailId);\
            \
            if (error) \{\
                alert("DELETE FAILED: " + error.message);\
            \} else \{\
                fetchLogs();\
                showToast("ENTRY_DELETED");\
                closeConfirmModal();\
                closeDetailModal();\
            \}\
        \}\
\
        // --- UI Functions ---\
        function showToast(msg) \{\
            const toast = document.getElementById('toast');\
            const text = document.getElementById('toast-msg');\
            text.innerText = msg;\
            toast.classList.remove('toast-enter');\
            toast.classList.add('toast-active');\
            setTimeout(() => \{ toast.classList.remove('toast-active'); toast.classList.add('toast-enter'); \}, 2000);\
        \}\
\
        function updateTimeSystem() \{\
            const now = new Date();\
            const dateStr = now.getFullYear() + '.' + String(now.getMonth() + 1).padStart(2, '0') + '.' + String(now.getDate()).padStart(2, '0');\
            const startOfYear = new Date(now.getFullYear(), 0, 1);\
            const endOfYear = new Date(now.getFullYear() + 1, 0, 1);\
            \
            const totalYearMs = endOfYear - startOfYear;\
            const elapsedMs = now - startOfYear;\
            const percent = (elapsedMs / totalYearMs * 100).toFixed(2);\
            \
            const dateEl = document.getElementById('footer-date');\
            const remEl = document.getElementById('footer-year-rem');\
            const barEl = document.getElementById('footer-year-bar');\
\
            if (dateEl) dateEl.innerText = dateStr;\
            if (remEl) remEl.innerText = `REM: $\{(100 - percent).toFixed(2)\}%`;\
            if (barEl) barEl.style.width = `$\{percent\}%`;\
        \}\
\
        function calculateStats() \{\
            const totalCount = mockData.length;\
            const totalHours = (mockData.reduce((acc, item) => acc + (item.duration || 0), 0) / 60).toFixed(1);\
            document.getElementById('stat-total').innerText = totalCount.toString().padStart(3, '0');\
            document.getElementById('stat-hours').innerText = totalHours;\
            document.getElementById('stat-load').innerText = Math.min((totalHours/200)*100, 100).toFixed(0) + '%';\
            document.getElementById('stat-bar').style.width = Math.min((totalHours/200)*100, 100).toFixed(0) + '%';\
\
            // Quarterly Analysis Calculation\
            const quarters = [0, 0, 0, 0];\
            const currentYear = new Date().getFullYear();\
\
            mockData.forEach(item => \{\
                if (!item.date) return;\
                // Format is YYYY.MM.DD\
                const parts = item.date.split('.');\
                if (parts.length < 2) return;\
                const year = parseInt(parts[0], 10);\
                const month = parseInt(parts[1], 10);\
\
                if (year === currentYear) \{\
                    if (month >= 1 && month <= 3) quarters[0]++;\
                    else if (month >= 4 && month <= 6) quarters[1]++;\
                    else if (month >= 7 && month <= 9) quarters[2]++;\
                    else if (month >= 10 && month <= 12) quarters[3]++;\
                \}\
            \});\
\
            const maxQ = Math.max(...quarters, 1); // Avoid division by zero\
\
            // Update DOM for bars\
            for(let i=0; i<4; i++) \{\
                const barEl = document.getElementById(`stat-q$\{i+1\}-bar`);\
                const valEl = document.getElementById(`stat-q$\{i+1\}-val`);\
                if(barEl && valEl) \{\
                    const heightPercent = (quarters[i] / maxQ * 100);\
                    // Min height 5% for visibility if count > 0, else 0\
                    const finalHeight = quarters[i] > 0 ? Math.max(heightPercent, 5) : 0;\
                    barEl.style.height = `$\{finalHeight\}%`;\
                    valEl.innerText = quarters[i];\
                \}\
            \}\
        \}\
\
        function renderSubFilters(type) \{\
            const container = document.getElementById('sub-filter-container');\
            container.innerHTML = '';\
            (categoryTags[type] || ['ALL']).forEach((tag, i) => \{\
                const btn = document.createElement('button');\
                const isActive = tag === currentSubTag;\
                const activeClass = "text-[#FFE600] border-[#FFE600] bg-[#FFE600]/10";\
                const inactiveClass = "text-zinc-500 border-zinc-700 hover:text-zinc-300 hover:border-zinc-500";\
                btn.className = `px-3 py-1.5 text-xs font-mono border border-dashed transition-all slide-up $\{isActive ? activeClass : inactiveClass\}`;\
                btn.style.animationDelay = i * 0.05 + 's';\
                btn.innerText = tag;\
                btn.onclick = () => \{ currentSubTag = tag; renderSubFilters(type); renderList(type); \};\
                container.appendChild(btn);\
            \});\
        \}\
\
        function renderList(type) \{\
            const container = document.getElementById('item-list');\
            container.innerHTML = '';\
            const items = mockData.filter(i => i.type === type && (currentSubTag === 'ALL' || (i.tags && i.tags.includes(currentSubTag))));\
            \
            if (items.length === 0) \{\
                container.innerHTML = `<div class="p-8 text-center text-zinc-600 font-mono text-sm border border-dashed border-zinc-800">NO_DATA // $\{type.toUpperCase()\} :: $\{currentSubTag\}</div>`;\
                return;\
            \}\
            \
            items.forEach((item, i) => \{\
                const card = document.createElement('div');\
                card.className = 'glass-panel p-0 flex h-28 relative group overflow-hidden slide-up cursor-pointer active:scale-[0.98] transition-transform';\
                card.style.animationDelay = i * 0.05 + 's';\
                card.onclick = () => openDetailModal(item);\
                let stars = '\uc0\u9733 '.repeat(item.rating) + '\u9734 '.repeat(5 - item.rating);\
                \
                // \uc0\u21160 \u24577 \u22270 \u26631 \
                const typeIcon = categoryIcons[item.type] || 'file-question';\
\
                card.innerHTML = `\
                    <div class="w-24 relative overflow-hidden bg-black flex-shrink-0"><img src="$\{item.img\}" class="w-full h-full object-cover opacity-60 group-hover:opacity-100 transition-all grayscale group-hover:grayscale-0"><div class="absolute inset-0 bg-gradient-to-r from-transparent to-[#18181b]"></div></div>\
                    <div class="flex-1 p-3 flex flex-col justify-between z-10">\
                        <div>\
                            <div class="flex justify-between items-start">\
                                <h3 class="font-bold text-lg leading-tight truncate pr-2 text-white group-hover:text-[#FFE600] transition-colors">$\{item.title\}</h3>\
                                <i data-lucide="$\{typeIcon\}" class="w-4 h-4 text-zinc-600 group-hover:text-[#FFE600] transition-colors"></i>\
                            </div>\
                            <div class="flex gap-2 mt-1 items-center"><p class="text-[0.65rem] font-mono text-zinc-500 uppercase tracking-wider truncate max-w-[100px]">$\{item.author\}</p><span class="text-[0.5rem] font-mono text-[#FFE600] border border-[#FFE600]/30 px-1 opacity-70">$\{item.tags[0] || ''\}</span></div>\
                        </div>\
                        <div class="flex justify-between items-end border-t border-white/5 pt-2 mt-1"><div class="text-[#FFE600] text-xs tracking-widest">$\{stars\}</div><div class="text-[0.6rem] font-mono text-zinc-600 bg-white/5 px-1.5 py-0.5 rounded-sm">$\{item.date\}</div></div>\
                    </div>`;\
                container.appendChild(card);\
            \});\
            lucide.createIcons(\{ root: container \}); // \uc0\u37325 \u35201 \u65306 \u28210 \u26579 \u21345 \u29255 \u20869 \u30340 \u22270 \u26631 \
        \}\
\
        function filterType(type) \{\
            currentType = type; currentSubTag = 'ALL';\
            ['book', 'movie', 'music', 'video'].forEach(t => \{\
                const btn = document.getElementById('filter-'+t);\
                btn.className = `flex-1 px-1 py-2 text-xs font-bold font-mono cut-corner transition-all text-center truncate $\{t === type ? "bg-[#FFE600] text-black shadow-[0_0_10px_rgba(255,230,0,0.3)]" : "bg-zinc-800 text-zinc-400 hover:text-white"\}`;\
            \});\
            renderSubFilters(type); renderList(type);\
        \}\
\
        function switchPage(page) \{\
            document.getElementById('page-archive').classList.add('hidden');\
            document.getElementById('page-stats').classList.add('hidden');\
            document.getElementById('page-'+page).classList.remove('hidden');\
            const btnArchive = document.getElementById('btn-archive');\
            const btnStats = document.getElementById('btn-stats');\
            if (page === 'archive') \{\
                btnArchive.classList.add('active-tab'); btnArchive.classList.remove('inactive-tab');\
                btnStats.classList.remove('active-tab'); btnStats.classList.add('inactive-tab');\
            \} else \{\
                btnArchive.classList.remove('active-tab'); btnArchive.classList.add('inactive-tab');\
                btnStats.classList.add('active-tab'); btnStats.classList.remove('inactive-tab');\
                calculateStats();\
            \}\
        \}\
\
        function openDetailModal(item) \{\
            currentDetailId = item.id;\
            const modal = document.getElementById('detail-modal');\
            const backdrop = document.getElementById('detail-backdrop');\
            const content = document.getElementById('detail-content');\
            \
            document.getElementById('modal-id').innerText = item.id.substr(0, 8);\
            document.getElementById('modal-title').innerText = item.title;\
            document.getElementById('modal-author').innerText = item.author;\
            document.getElementById('modal-rating').innerText = item.rating.toFixed(1);\
            document.getElementById('modal-img').src = item.img;\
            document.getElementById('modal-desc').innerText = item.desc || "NO DATA.";\
            document.getElementById('modal-note').value = item.note || "";\
            document.getElementById('modal-tags').innerHTML = item.tags.map(t => `<span class="px-2 py-1 text-xs font-mono font-bold bg-[#FFE600]/10 text-[#FFE600] border border-[#FFE600]/30">$\{t\}</span>`).join('');\
\
            // \uc0\u35814 \u24773 \u39029 \u21160 \u24577 \u22270 \u26631 \
            const iconName = categoryIcons[item.type] || 'file-question';\
            document.getElementById('modal-icon-container').innerHTML = `<i data-lucide="$\{iconName\}" class="w-4 h-4"></i>`;\
            lucide.createIcons(\{ root: document.getElementById('modal-icon-container') \});\
\
            modal.classList.remove('hidden');\
            void modal.offsetWidth; \
            backdrop.classList.remove('opacity-0');\
            content.classList.remove('translate-y-full', 'md:translate-y-10');\
        \}\
\
        function closeDetailModal() \{\
            currentDetailId = null;\
            const modal = document.getElementById('detail-modal');\
            const backdrop = document.getElementById('detail-backdrop');\
            const content = document.getElementById('detail-content');\
            backdrop.classList.add('opacity-0');\
            content.classList.add('translate-y-full', 'md:translate-y-10');\
            setTimeout(() => \{ modal.classList.add('hidden'); \}, 300);\
        \}\
\
        function deleteEntry() \{\
            if (!currentDetailId) return;\
            const modal = document.getElementById('confirm-modal');\
            const content = document.getElementById('confirm-content');\
            modal.classList.remove('hidden');\
            requestAnimationFrame(() => \{\
                content.classList.remove('scale-90', 'opacity-0');\
                content.classList.add('scale-100', 'opacity-100');\
            \});\
        \}\
\
        function closeConfirmModal() \{\
            const modal = document.getElementById('confirm-modal');\
            const content = document.getElementById('confirm-content');\
            content.classList.remove('scale-100', 'opacity-100');\
            content.classList.add('scale-90', 'opacity-0');\
            setTimeout(() => \{ modal.classList.add('hidden'); \}, 300);\
        \}\
\
        // ADD MODAL & FAB\
        let currentAddType = 'book';\
        function openAddModal(type) \{\
            currentAddType = type;\
            const modal = document.getElementById('add-modal');\
            const backdrop = document.getElementById('add-backdrop');\
            const content = document.getElementById('add-content');\
            \
            document.getElementById('add-type-label').innerText = type.toUpperCase();\
            \
            // \uc0\u26356 \u26032 \u28155 \u21152 \u24377 \u31383 \u30340 \u22270 \u26631 \
            const iconName = categoryIcons[type] || 'file-question';\
            const iconContainer = document.getElementById('add-modal-icon-container');\
            iconContainer.innerHTML = `<i data-lucide="$\{iconName\}" class="w-4 h-4"></i>`;\
            lucide.createIcons(\{ root: iconContainer \});\
\
            document.getElementById('add-search-input').value = '';\
            document.getElementById('search-result-area').classList.add('hidden');\
            document.getElementById('add-date').valueAsDate = new Date();\
            modal.classList.remove('hidden');\
            void modal.offsetWidth; \
            backdrop.classList.remove('opacity-0');\
            content.classList.remove('translate-y-full', 'md:translate-y-10');\
            toggleFab(); \
        \}\
\
        function closeAddModal() \{\
            const modal = document.getElementById('add-modal');\
            const backdrop = document.getElementById('add-backdrop');\
            const content = document.getElementById('add-content');\
            backdrop.classList.add('opacity-0');\
            content.classList.add('translate-y-full', 'md:translate-y-10');\
            setTimeout(() => \{ modal.classList.add('hidden'); \}, 300);\
        \}\
\
        function simulateSearch() \{\
            const query = document.getElementById('add-search-input').value;\
            if(!query) return;\
            const btn = event.target;\
            const originalText = btn.innerText;\
            btn.innerText = "SCANNING...";\
            setTimeout(() => \{\
                btn.innerText = originalText;\
                document.getElementById('search-result-area').classList.remove('hidden');\
                const mockRes = \{\
                    title: query.toUpperCase(),\
                    author: "UNKNOWN ENTITY",\
                    img: `https://placehold.co/100x150/000/FFE600?text=$\{query.substring(0,3).toUpperCase()\}`\
                \};\
                document.getElementById('res-title').innerText = mockRes.title;\
                document.getElementById('res-author').innerText = mockRes.author;\
                document.getElementById('res-img').src = mockRes.img;\
            \}, 800);\
        \}\
\
        let isFabOpen = false;\
        function toggleFab() \{\
            isFabOpen = !isFabOpen;\
            const trigger = document.getElementById('fab-trigger');\
            const iconPlus = document.getElementById('icon-plus');\
            const iconClose = document.getElementById('icon-close');\
            const items = document.querySelectorAll('.fab-item');\
            if (isFabOpen) \{\
                iconPlus.classList.add('opacity-0', 'scale-50', 'rotate-90');\
                iconClose.classList.remove('opacity-0', 'scale-50');\
                iconClose.classList.add('opacity-100', 'scale-100', 'rotate-90');\
                trigger.classList.add('bg-white');\
                items.forEach(item => item.classList.remove('translate-y-26', 'translate-y-20', 'translate-y-14', 'translate-y-8', 'opacity-0', 'pointer-events-none'));\
            \} else \{\
                iconPlus.classList.remove('opacity-0', 'scale-50', 'rotate-90');\
                iconClose.classList.add('opacity-0', 'scale-50');\
                iconClose.classList.remove('opacity-100', 'scale-100', 'rotate-90');\
                trigger.classList.remove('bg-white');\
                items.forEach((item, i) => \{\
                    const offsets = ['translate-y-26', 'translate-y-20', 'translate-y-14', 'translate-y-8'];\
                    item.classList.add(offsets[i], 'opacity-0', 'pointer-events-none');\
                \});\
            \}\
        \}\
\
        // INIT\
        if (SUPABASE_URL === 'YOUR_SUPABASE_URL') \{\
            alert('\uc0\u9888 \u65039  \u35831 \u20808 \u37197 \u32622  Supabase URL\u65281 \\n\u22312 \u20195 \u30721 \u39030 \u37096 \u25214 \u21040  SUPABASE_URL \u24182 \u22635 \u20837 \u20320 \u30340 \u39033 \u30446 \u22320 \u22336 \u12290 ');\
        \}\
        initAuth();\
        updateTimeSystem(); setInterval(updateTimeSystem, 1000);\
        calculateStats(); \
        filterType('book');\
    </script>\
</body>\
</html>}